<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>My Appointments | Lash Therapy Indy</title>

<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    background: #F7F4FF;
    color: #2B214A;
    padding-bottom: 90px; /* keeps footer visible */
  }
  .wrap {
    max-width: 900px;
    margin: 0 auto;
    padding: 28px 18px;
  }
  h1 {
    font-weight: 800;
    font-size: clamp(28px, 5vw, 40px);
    margin: 0 0 6px;
  }
  .sub {
    color: #6a5c93;
    margin-bottom: 18px;
  }
  .card {
    background: #fff;
    border: 1px solid #EEE5FA;
    border-radius: 20px;
    box-shadow: 0 6px 20px rgba(126,99,201,.12);
    padding: 18px;
    margin-top: 14px;
  }
  .muted {
    color: #6a5c93;
  }
  .visit {
    border-bottom: 1px dashed #E5E0F5;
    padding: 6px 0;
  }
  .visit:last-child {
    border: none;
  }
  footer {
    position: fixed;
    left: 0; right: 0; bottom: 0;
    background: #fff;
    border-top: 2px solid #EEE6FA;
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 10px 0;
    font-weight: 600;
    z-index: 10;
  }
  footer a {
    color: #7E63C9;
    text-decoration: none;
    font-size: 15px;
  }
  footer a.active {
    color: #3A9D23;
  }
  footer a:hover {
    filter: brightness(1.1);
  }
</style>
</head>

<body>
<div class="wrap">
  <h1 id="userName">Your Appointments</h1>
  <div class="sub">Here’s what’s next — and a look at your past visits ✨</div>

  <div class="card">
    <b>Next Appointment:</b>
    <div id="na" style="margin-top:4px" class="muted">—</div>
  </div>

  <div class="card">
    <b>Past Visits</b>
    <div id="pa" style="margin-top:8px" class="muted">Loading...</div>
  </div>

  <div class="card">
    <b>Reward Visits:</b> <span id="rw">0</span>
  </div>
</div>

<footer>
  <a href="index.html">Home</a>
  <a href="book.html">Book</a>
  <a href="appointments.html" class="active">Appointments</a>
  <a href="preferences.html">Preferences</a>
</footer>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const fn = localStorage.getItem("fn") || "";
  const ln = localStorage.getItem("ln") || "";
  const name = (fn + " " + ln).trim() || "Beautiful";
  document.getElementById("userName").textContent = `Appointments for ${name}`;

  const nextAppt = localStorage.getItem("na") || "";
  const past = localStorage.getItem("pa") || "";
  const rw = localStorage.getItem("rw") || "0";

  document.getElementById("rw").textContent = rw;

  // Next appointment
  document.getElementById("na").textContent = nextAppt || "No upcoming appointments.";

  // Past appointments list
  const paEl = document.getElementById("pa");
  if (past) {
    const visits = past.split("||").map(v => v.trim()).filter(v => v);
    if (visits.length > 0) {
      paEl.innerHTML = visits.map(v => `<div class="visit">• ${v}</div>`).join("");
    } else {
      paEl.textContent = "No past appointments yet.";
    }
  } else {
    paEl.textContent = "No past appointments yet.";
  }
});
</script>
</body>
</html>
